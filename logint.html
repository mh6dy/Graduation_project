<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تأثير تفكيك وتجميع الصورة</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: #111;
            margin: 0;
            overflow: hidden;
            font-family: Arial, sans-serif;
        }

        .image-container {
            width: 794px;
            height: 419px;
            position: relative;
        }

        .tile {
            position: absolute;
            background-size: 794px 419px;
            background-image: url('img_book/caver22.gif');
            transition: all 1s ease-out;
            box-shadow: 0 0 10px rgba(119, 0, 255, 0.5);
            opacity: 0;
        }

        .tile:hover {
            transform: scale(1.1) !important;
            z-index: 100;
            box-shadow: 0 0 20px rgb(48, 92, 222);
        }
    </style>
</head>
<body>
    <div class="image-container" id="imageContainer"></div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const container = document.getElementById('imageContainer');
            const imgWidth = 794;
            const imgHeight = 419;
            const tileSize = 100;  // زيادة حجم كل قطعة لتقليل العدد
            let tiles = [];
            let isScattered = false;

            // إنشاء قطع الصورة
            function createTiles() {
                container.innerHTML = '';
                tiles = [];

                for (let y = 0; y < imgHeight; y += tileSize) {
                    for (let x = 0; x < imgWidth; x += tileSize) {
                        const tile = document.createElement('div');
                        tile.className = 'tile';
                        
                        const width = Math.min(tileSize, imgWidth - x);
                        const height = Math.min(tileSize, imgHeight - y);
                        
                        tile.style.width = `${width}px`;
                        tile.style.height = `${height}px`;
                        tile.style.backgroundPosition = `-${x}px -${y}px`;
                        tile.style.left = `${x}px`;
                        tile.style.top = `${y}px`;
                        
                        container.appendChild(tile);
                        tiles.push(tile);
                    }
                }
            }

            // تفكيك القطع
            function scatterTiles() {
                tiles.forEach((tile, index) => {
                    const angle = Math.random() * Math.PI * 2;
                    const distance = 100 + Math.random() * 150;
                    
                    tile.style.opacity = '1';
                    tile.style.transform = `
                        translate(
                            ${Math.cos(angle) * distance}px,
                            ${Math.sin(angle) * distance}px
                        )
                        rotate(${Math.random() * 360}deg)
                    `;
                });

                isScattered = true;
                setTimeout(reassembleTiles, 1000);  // وقت استرجاع سريع (1 ثانية)
            }

            // إعادة تجميع القطع
            function reassembleTiles() {
                tiles.forEach((tile, index) => {
                    setTimeout(() => {
                        tile.style.transform = 'translate(0, 0) rotate(0deg)';
                    }, index * 10);
                });

                isScattered = false;
                setTimeout(() => {
                    if (!isScattered) {
                        // عرض الصورة كاملة لمدة أطول (5 ثواني)
                        setTimeout(scatterTiles, 5000);
                    }
                }, 1500);
            }

            // بدء الحركة
            createTiles();
            setTimeout(() => {
                tiles.forEach(tile => tile.style.opacity = '1');
                setTimeout(scatterTiles, 3000);  // عرض الصورة كاملة أولاً لمدة 3 ثواني
            }, 500);
        });
    </script>
</body>
</html>